Name: bff.bff
ListenOn: 0.0.0.0:20010
Etcd:
  Hosts:
    - ${ETCD_URL}
  Key: bff.bff
Timeout: 0
Log:
  ServiceName: bff.bff
  Mode: file
  Path: ../logs/bff
  Level: debug
##监控
#Prometheus:
#  Host: 0.0.0.0
#  Port: 20011
#  Path: /metrics
##链路追踪
#Telemetry:
#  Name: bff.bff
#  Endpoint: http://127.0.0.1:14268/api/traces
#  Sampler: 1.0
#  Batcher: jaeger

#MiniHttp:
#  Name: bff.bff.minihttp
#  Host: 0.0.0.0
#  Port: 20011

Cache:
  - Host: ${REDIS_HOST}
    Pass: ${REDIS_PASSWORD}
KV:
  - Host: ${REDIS_HOST}
    Pass: ${REDIS_PASSWORD}
#Cache:
#  - Host: 127.0.0.1:7000
#    Type: cluster
#  - Host: 127.0.0.1:7001
#    Type: cluster
#  - Host: 127.0.0.1:7002
#    Type: cluster
#
#KV:
#  - Host: 127.0.0.1:7000
#    Type: cluster
#  - Host: 127.0.0.1:7001
#    Type: cluster
#  - Host: 127.0.0.1:7002
#    Type: cluster

Mysql:
  DSN: ${MYSQL_URI}
  Active: 64
  Idle: 64
  IdleTimeout: 4h

MessageSharding: 1
#ChannelMessageSharding: 8

Code:
  Name: ${CODE_NAME}
  SendCodeUrl: ${NOTIFICATION_BASE_URL}
  VerifyCodeUrl: ""
  Key: ${NOTIFICATION_KEY}
  Secret: ${NOTIFICATION_SECRET}
  RegionId: ""
  BypassCode: "${BYPASS_CODE}"

SignInServiceNotification:
  - Param: "New login."
    EntityType: "messageEntityBold"
  - TextFormat: "Dear %s, we detected a login into your account from a new device on %s.\n\nDevice: %s\nLocation: %s (IP = "
    TextA:
      - "#name"
      - "#now"
      - "#client"
      - "#region"
    Param: "#clientIp"
    EntityType: "messageEntityTextUrl"
  - TextFormat: ")\n\nIf this wasn't you, you can terminate that session in "
    Param: "Settings > Devices"
    EntityType: "messageEntityBold"
  - TextFormat: " (or "
    Param: "Privacy & Security > Active Sessions"
    EntityType: "messageEntityBold"
  - TextFormat: ")."

SignInMessage:
  - TextFormat: "Login code: "
    Param: "#code"
    EntityType: "messageEntityBold"
  - TextFormat: ". Do "
    Param: "not"
    EntityType: "messageEntityBold"
  - TextFormat: " give this code to anyone, even if they say they are from %s!\n\nThis code can be used to log in to your %s account. We never ask it for anything else.\n\n  If you didn't request this code by trying to log in on another device, simply ignore this message."
    TextA:
      - "#app_name"
      - "#app_name"

BizServiceClient:
  Etcd:
    Hosts:
      - ${ETCD_URL}
    Key: service.biz_service
  Timeout: 0
AuthSessionClient:
  Etcd:
    Hosts:
      - ${ETCD_URL}
    Key: service.authsession
MediaClient:
  Etcd:
    Hosts:
      - ${ETCD_URL}
    Key: service.media
  Timeout: 0
IdgenClient:
  Etcd:
    Hosts:
      - ${ETCD_URL}
    Key: service.idgen
MsgClient:
  Etcd:
    Hosts:
      - ${ETCD_URL}
    Key: messenger.msg
  Timeout: 0
ChannelmsgClient:
  Etcd:
    Hosts:
      - ${ETCD_URL}
    Key: messenger.channelmsg
  Timeout: 0
DfsClient:
  Etcd:
    Hosts:
      - ${ETCD_URL}
    Key: service.dfs
  Timeout: 0
StatusClient:
  Etcd:
    Hosts:
      - ${ETCD_URL}
    Key: service.status
TwofaClient:
  Etcd:
    Hosts:
      - ${ETCD_URL}
    Key: service.twofa
  Timeout: 0
PushClient:
  Etcd:
    Hosts:
      - ${ETCD_URL}
    Key: messenger.push
WebpageClient:
  Etcd:
    Hosts:
      - ${ETCD_URL}
    Key: messenger.webpage

SyncClient:
  Topic:   "Sync-T"
  Brokers:
    - ${KAFKA_HOST}

ChannelSyncClient:
  Topic:   "ChannelSync-T"
  Brokers:
    - ${KAFKA_HOST}

HistoryttlClient:
  Host: ${REDIS_HOST}
  Pass: ${REDIS_PASSWORD}
  Type: node

PollClient:
  Etcd:
    Hosts:
      - ${ETCD_URL}
    Key: service.poll

ScheduledmessageClient:
  Etcd:
    Hosts:
      - ${ETCD_URL}
    Key: messenger.scheduledmessage

AdminLogClient:
  Topic:   "AdminLog-T"
  Brokers:
    - ${KAFKA_HOST}

NotifySyncClient:
  Etcd:
    Hosts:
      - ${ETCD_URL}
    Key: messenger.notify
NotifyAsyncClient:
  Topic:   "Notify-T"
  Brokers:
    - ${KAFKA_HOST}

StoryqClient:
  Topic:   "Storyq-T"
  Brokers:
    - ${KAFKA_HOST}

StaticMap:
  Name: "yandex"
  Key: ""
  Proxy: "http://127.0.0.1:7890"
